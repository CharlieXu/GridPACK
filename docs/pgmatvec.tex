\documentclass[12pt]{article}
\renewcommand{\baselinestretch}{1.0}
\begin{document}
\begin{titlepage}
\begin{center}
{\LARGE DRAFT: Interface Specification for PGMat and PGVec Modules}
\end{center}
\end{titlepage}
%\tableofcontents
\newpage
\pagestyle{plain}
\section{Introduction}
These modules are designed at supporting the creation of distributed matrices
and vectors and to support basic matrix and vector operations. These modules are
also designed to support easy creation of matrices and vectors from fields
associated with the PGRID module.
\section{Creating and destroying matrices}
\subsection{Create}
\begin{verbatim}
void PGMat::Create(void)
\end{verbatim}
This function creates a basic matrix object. Once created, the matrix has no
properties until these are set using subsequent operations. This is a collective
operation and must be called on all processors.
\subsection{SetType}
\begin{verbatim}
void PGMat::SetType(char *type)
\end{verbatim}
\begin{itemize}
\item (IN) \texttt{type}: a character string indicating how the matrix is stored
\end{itemize}
This function can be used to specify how the matrix is stored. Possible values
are \texttt{"dense"} and \texttt{"csr"}. The default value used when the matrix
is created is \texttt{"csr"}. This is a collective operation and must be called
on all processors.
\subsection{SetSize}
\begin{verbatim}
void PGMat::SetSize(int nrows, int ncols, char *datatype)
\end{verbatim}
\begin{itemize}
\item (IN) \texttt{nrows}: the number of rows in the matrix
\item (IN) \texttt{ncols}: the number of columns in the matrix
\item (IN) \texttt{datatype}: a character string indicating the type of data
elements
\end{itemize}
This function is used to set the dimensions of the matrix and to specify what
type of data is being stored. The options are \texttt{"float"},
\texttt{"double"}, \texttt{"floatComplex"}, and \texttt{"doubleComplex"}. This
is a collective operation and must be called on all processors. The same
arguments must be used on all processors as well.
\subsection{SetElem}
\begin{verbatim}
void PGMat::SetElem(int irow, int icol, void *value)
\end{verbatim}
\begin{itemize}
\item (IN) \texttt{irow}: row index of matrix element
\item (IN) \texttt{icol}: column index of matrix element
\item (IN) \texttt{value}: value of matrix element
\end{itemize}
This function is used to set the value of a matrix element. This function is
also adding the element to the matrix. Matrix elements for which this function is
not called are assumed to be zero. The variable \texttt{value} must correspond
to the data type specified in the \texttt{SetSize} statement. This function can
only be called after the \texttt{SetSize} function has been called. This
function is local and can be called independently of any calls on other
processors.
\subsection{Assemble}
\begin{verbatim}
int PGMat::Assemble(void)
\end{verbatim}
Once this function is called, a matrix is ready for other operations. This
function is responsible for actually creating the internal data structures
representing the matrix and for redistributing the data internally so that the
matrix is ready for use.
\subsection{Destroy}
\begin{verbatim}
void PGMat::Destroy(void)
\end{verbatim}
This function destroys an existing matrix and frees up all allocated resources
associated with the matrix.

\section{Creating and destroying vectors}
The vector class can be used to create distributed vectors. Vectors are assumed
to be dense and that there is no advantage in assuming significant sparsity in
the vectors. The vector class also supports operations on vectors and between
vectors and matrices.
\subsection{Create}
\begin{verbatim}
void PGVec::Create(void)
\end{verbatim}
This function creates a basic vector object. Once created, the vector has no
properties until these are set using subsequent operations. This is a collective
operation and must be called on all processors.
\subsection{SetSize}
\begin{verbatim}
void PGVec::SetSize(int nelems, char *datatype)
\end{verbatim}
\begin{itemize}
\item (IN) \texttt{nelems}: the number of elements in the vector
\item (IN) \texttt{datatype}: a character string indicating the type of data
elements
\end{itemize}
This function is used to set the length of the vector and to specify what
type of data is being stored. The options are \texttt{"float"},
\texttt{"double"}, \texttt{"floatComplex"}, and \texttt{"doubleComplex"}. This
is a collective operation and must be called on all processors. The same
arguments must be used on all processors as well.
\subsection{SetElem}
\begin{verbatim}
void PGVec::SetElem(int index, void *value)
\end{verbatim}
\begin{itemize}
\item (IN) \texttt{index}: index of vector element
\item (IN) \texttt{value}: value of vector element
\end{itemize}
This function is used to set the value of a vector element. Vector elements for
which this function is not called are assumed to be zero. The variable \texttt{value}
must correspond to the data type specified in the \texttt{SetSize} statement.
This function can only be called after the \texttt{SetSize} function has been called.
This function is local and can be called independently of any calls on other
processors.
\subsection{Assemble}
\begin{verbatim}
int PGVec::Assemble(void)
\end{verbatim}
Once this function is called, a vector is ready for other operations. This
function is responsible for actually creating the internal data structures
representing the vector and for redistributing the data internally so that the
vector is ready for use.
\subsection{Destroy}
\begin{verbatim}
void PGVec::Destroy(void)
\end{verbatim}
This function destroys an existing vector and frees up all allocated resources
associated with the vector.
\subsection{MatVec}
\begin{verbatim}
void PGVec::MatVec(PGMat *a, PGVec *x)
\end{verbatim}
\begin{itemize}
\item (IN) \texttt{a}: matrix in matrix-vector multiply
\item (IN) \texttt{x}: vector in matrix-vector multiply
\end{itemize}
This function multiplies a matrix times a vector and puts the result in the
vector that is invoking the function. This function is collective and must be
called on all processors.
\subsection{Dot}
\begin{verbatim}
void PGVec::Dot(PGVec *b, void *result)
\end{verbatim}
\begin{itemize}
\item (IN) \texttt{b}: vector in inner product
\item (OUT) \texttt{result}: value of inner product
\end{itemize}
This function evaluates the dot product of two vectors \texttt{a} and
\texttt{b} where \texttt{a} represents the vector that is invoking the
\texttt{Dot} method. The result is returned in the variable \texttt{result}. If
\texttt{b} is complex, then the complex conjugate of \texttt{b} is taken before
multiply the elements together. The type of \texttt{result} must match the most
complicate type declaration of the calling vector and \texttt{b}. This function
is collective and must be called on all processors.
\subsection{Scale}
\begin{verbatim}
void PGVec::Scale(void *scale)
\end{verbatim}
\begin{itemize}
\item (IN) \texttt{scale}: scale factor for vector
\end{itemize}
This function can be used to scale a vector by a fixed amount. Every element in
the vector multiplied by the number \texttt{scale}. The data type of the
\texttt{scale} variable must match the type declaration of the invoking vector.
This function is collective and must be called on all processors.
\end{document}
